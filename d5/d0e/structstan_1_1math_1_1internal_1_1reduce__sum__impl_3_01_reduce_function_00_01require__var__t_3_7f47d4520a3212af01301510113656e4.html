<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stan Math Library: stan::math::internal::reduce_sum_impl&lt; ReduceFunction, require_var_t&lt; ReturnType &gt;, ReturnType, Vec, Args... &gt; Struct Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../$standoxy.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../stanlogo-main.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://mc-stan.org/math">Stan Math Library</a>
   &#160;<span id="projectnumber">4.0.1</span>
   </div>
   <div id="projectbrief">Automatic Differentiation</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d0e/structstan_1_1math_1_1internal_1_1reduce__sum__impl_3_01_reduce_function_00_01require__var__t_3_7f47d4520a3212af01301510113656e4.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../de/d06/structstan_1_1math_1_1internal_1_1reduce__sum__impl_3_01_reduce_function_00_01require__var__t_3_1d4105d2170292b37681a9c6ce47d8af.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stan::math::internal::reduce_sum_impl&lt; ReduceFunction, require_var_t&lt; ReturnType &gt;, ReturnType, Vec, Args... &gt; Struct Template Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename ReduceFunction, typename ReturnType, typename Vec, typename... Args&gt;<br />
struct stan::math::internal::reduce_sum_impl&lt; ReduceFunction, require_var_t&lt; ReturnType &gt;, ReturnType, Vec, Args... &gt;</h3>

<p>Var specialization of <a class="el" href="../../d8/d4d/structstan_1_1math_1_1internal_1_1reduce__sum__impl.html" title="reduce_sum_impl implementation for any autodiff type. ">reduce_sum_impl</a>. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">ReduceFunction</td><td>Type of reducer function </td></tr>
    <tr><td class="paramname">ReturnType</td><td>Must be var </td></tr>
    <tr><td class="paramname">Vec</td><td>Type of sliced argument </td></tr>
    <tr><td class="paramname">Args</td><td>Types of shared arguments </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d7a/rev_2functor_2reduce__sum_8hpp_source.html#l00030">30</a> of file <a class="el" href="../../db/d7a/rev_2functor_2reduce__sum_8hpp_source.html">reduce_sum.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="../../db/d7a/rev_2functor_2reduce__sum_8hpp_source.html">reduce_sum.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dcc/structstan_1_1math_1_1internal_1_1reduce__sum__impl_3_01_reduce_function_00_01require__var__t_3_a63935318039ad46e0be3e3377364cae.html">recursive_reducer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This struct is used by the TBB to accumulate partial sums over consecutive ranges of the input.  <a href="../../d6/dcc/structstan_1_1math_1_1internal_1_1reduce__sum__impl_3_01_reduce_function_00_01require__var__t_3_a63935318039ad46e0be3e3377364cae.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d57/structstan_1_1math_1_1internal_1_1reduce__sum__impl_3_01_reduce_function_00_01require__var__t_3_a01804cf1708f09b35c176d9d7676d3b.html">scoped_args_tuple</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab7b74b96db33bc459644216e71040c4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#abf1141ed12907bf4b7c268faa6126762">var</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d0e/structstan_1_1math_1_1internal_1_1reduce__sum__impl_3_01_reduce_function_00_01require__var__t_3_7f47d4520a3212af01301510113656e4.html#ab7b74b96db33bc459644216e71040c4d">operator()</a> (Vec &amp;&amp;vmapped, bool auto_partitioning, int grainsize, std::ostream *msgs, Args &amp;&amp;...args) const </td></tr>
<tr class="memdesc:ab7b74b96db33bc459644216e71040c4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call an instance of the function <code>ReduceFunction</code> on every element of an input sequence and sum these terms.  <a href="#ab7b74b96db33bc459644216e71040c4d">More...</a><br /></td></tr>
<tr class="separator:ab7b74b96db33bc459644216e71040c4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab7b74b96db33bc459644216e71040c4d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ReduceFunction , typename ReturnType , typename Vec , typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#abf1141ed12907bf4b7c268faa6126762">var</a> <a class="el" href="../../d8/d4d/structstan_1_1math_1_1internal_1_1reduce__sum__impl.html">stan::math::internal::reduce_sum_impl</a>&lt; ReduceFunction, <a class="el" href="../../dc/da1/group__var__types.html#gaa0df679447b07d2490b186625de24638">require_var_t</a>&lt; ReturnType &gt;, ReturnType, Vec, Args... &gt;::operator() </td>
          <td>(</td>
          <td class="paramtype">Vec &amp;&amp;&#160;</td>
          <td class="paramname"><em>vmapped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>auto_partitioning</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>grainsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream *&#160;</td>
          <td class="paramname"><em>msgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call an instance of the function <code>ReduceFunction</code> on every element of an input sequence and sum these terms. </p>
<p>This specialization is parallelized using tbb and works for reverse mode autodiff.</p>
<p>ReduceFunction must define an operator() with the same signature as: var f(Vec&amp;&amp; vmapped_subset, int start, int end, std::ostream* msgs, Args&amp;&amp;... args)</p>
<p><code>ReduceFunction</code> must be default constructible without any arguments</p>
<p>Each call to <code>ReduceFunction</code> is responsible for computing the start through end (inclusive) terms of the overall sum. All args are passed from this function through to the <code>ReduceFunction</code> instances. However, only the start through end (inclusive) elements of the vmapped argument are passed to the <code>ReduceFunction</code> instances (as the <code>vmapped_subset</code> argument).</p>
<p>This function distributes computation of the desired sum and the Jacobian of that sum over multiple threads by coordinating calls to <code>ReduceFunction</code> instances. Results are stored as precomputed varis in the autodiff tree.</p>
<p>If auto partitioning is true, break work into pieces automatically, taking grainsize as a recommended work size. The partitioning is not deterministic nor is the order guaranteed in which partial sums are accumulated. Due to floating point imprecisions this will likely lead to slight differences in the accumulated results between multiple runs. If false, break work deterministically into pieces smaller than or equal to grainsize and accumulate all the partial sums in the same order. This still may not achieve bitwise reproducibility.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">vmapped</td><td>Vector containing one element per term of sum </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">auto_partitioning</td><td>Work partitioning style </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">grainsize</td><td>Suggested grainsize for tbb </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">msgs</td><td>The print stream for warning messages </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">args</td><td>Shared arguments used in every sum term </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Summation of all terms </dd></dl>

<p>Definition at line <a class="el" href="../../db/d7a/rev_2functor_2reduce__sum_8hpp_source.html#l00225">225</a> of file <a class="el" href="../../db/d7a/rev_2functor_2reduce__sum_8hpp_source.html">reduce_sum.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>stan/math/rev/functor/<a class="el" href="../../db/d7a/rev_2functor_2reduce__sum_8hpp_source.html">reduce_sum.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../da/dce/namespacestan.html">stan</a></li><li class="navelem"><a class="el" href="../../d4/d84/namespacestan_1_1math.html">math</a></li><li class="navelem"><a class="el" href="../../d9/d07/namespacestan_1_1math_1_1internal.html">internal</a></li><li class="navelem"><a class="el" href="../../d5/d0e/structstan_1_1math_1_1internal_1_1reduce__sum__impl_3_01_reduce_function_00_01require__var__t_3_7f47d4520a3212af01301510113656e4.html">reduce_sum_impl&lt; ReduceFunction, require_var_t&lt; ReturnType &gt;, ReturnType, Vec, Args... &gt;</a></li>
    <li class="footer">
    <div class="contents" style="font-size:100%;">
      <span style="float:left; margin=0 1em 0 1em;">
      &nbsp;&nbsp;&nbsp;&nbsp;
      [ <a href="http://mc-stan.org/">Stan Home Page</a> ]
      </span>
      <span style="float:right; margin=0 1em 0 1em;">
      <i>&copy; 2011&ndash;2019,
      Stan Development Team.
      &nbsp;&nbsp;&nbsp;&nbsp;
      </i>
      </span>
    </div> </li>
  </ul>
</div>
</body>
</html>
