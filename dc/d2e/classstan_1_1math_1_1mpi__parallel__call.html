<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stan Math Library: stan::math::mpi_parallel_call&lt; call_id, ReduceF, CombineF &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../$standoxy.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../stanlogo-main.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://mc-stan.org/math">Stan Math Library</a>
   &#160;<span id="projectnumber">4.0.1</span>
   </div>
   <div id="projectbrief">Automatic Differentiation</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="../../d8/d4f/classstan_1_1math_1_1mpi__parallel__call-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stan::math::mpi_parallel_call&lt; call_id, ReduceF, CombineF &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;int call_id, typename ReduceF, typename CombineF&gt;<br />
class stan::math::mpi_parallel_call&lt; call_id, ReduceF, CombineF &gt;</h3>

<p>The MPI parallel call class manages the distributed evaluation of a collection of tasks following the map - reduce - combine pattern. </p>
<p>The class organizes the distribution of all job related information from the root node to all worker nodes. The class discriminates between parameters and static data. The static data is only transmitted a single time and cached on each worker locally after the inital transfer.</p>
<p>The flow of commands are:</p>
<ol type="1">
<li>The constructor of this class must be called on the root node where all parameters and static data is passed to the class.</li>
<li>The constructor then tries to allocate the MPI cluster resource to obtain control over all workers in the cluster. If the cluster is locked already, then an exception is fired.</li>
<li>The worker nodes are instructed to run the static distributed_apply method of this class. This static method then instantiates a <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html" title="The MPI parallel call class manages the distributed evaluation of a collection of tasks following the...">mpi_parallel_call</a> instance on the workers.</li>
<li>The root then broadcasts and scatters all necessary data to the cluster. Static data (including meta information on data shapes) are locally cached such that static data is only transferred on the first evaluation. Note that the work is equally distributed among the workers. That is N jobs are distributed ot a cluster of size W in N/W chunks (the remainder is allocated to node 1 onwards which ensures that the root node 0 has one job less).</li>
<li>Once the parameters and static data is distributed, the reduce operation is applied per defined job. Each job is allowed to return a different number of outputs such that the resulting data structure is a ragged array. The ragged array structure becomes known to <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html" title="The MPI parallel call class manages the distributed evaluation of a collection of tasks following the...">mpi_parallel_call</a> during the first evaluation and must not change for future calls.</li>
<li>Finally the local results are gathered on the root node over MPI and given on the root node to the combine functor along with the ragged array data structure.</li>
</ol>
<p>The MPI cluster resource is acquired with construction of <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html" title="The MPI parallel call class manages the distributed evaluation of a collection of tasks following the...">mpi_parallel_call</a> and is freed once the <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html" title="The MPI parallel call class manages the distributed evaluation of a collection of tasks following the...">mpi_parallel_call</a> goes out of scope (that is, deconstructed).</p>
<p>Note 1: During MPI operation everything must run synchronous. That is, if a job fails on any of the workers then the execution must still continue on all other workers. In order to maintain a synchronized state, even the worker with a failed job must return a valid output chunk since the gather commands issued on the root to collect results would otherwise fail. Thus, if a job fails on any worker the a respective status flag will be transferred after the reduce and the results gather step.</p>
<p>Note 2: During the first evaluation of the function the ragged array sizes need to be collected on the root from all workers. This is needed on the root such that the root knows how many outputs are computed on each worker. This information is then cached for all subsequent evaluations. However, caching this information can occur if and only if the evaluation of all functions was successfull on all workers during the first run. Thus, the first evaluation is handled with special care to ensure that caching of this meta info is only done when all workers have successfully evaluated the function and otherwise an exception is raised.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">call_id</td><td>label for the static data </td></tr>
    <tr><td class="paramname">ReduceF</td><td>reduce function called for each job, </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d07/namespacestan_1_1math_1_1internal.html#d3/dd0/classstan_1_1math_1_1internal_1_1map__rect__reduce">internal::map_rect_reduce</a> </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">CombineF</td><td>combine function called on the combined results on each job along with the ragged data structure information, </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d7f/classstan_1_1math_1_1internal_1_1map__rect__combine.html">internal::map_rect_combine</a> </dd></dl>

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00161">161</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a88f6e7e3dcbe2a7993dce89ce06e4d30"><td class="memTemplParams" colspan="2">template&lt;typename T_shared_param , typename T_job_param &gt; </td></tr>
<tr class="memitem:a88f6e7e3dcbe2a7993dce89ce06e4d30"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a88f6e7e3dcbe2a7993dce89ce06e4d30">mpi_parallel_call</a> (const T_shared_param &amp;shared_params, const std::vector&lt; Eigen::Matrix&lt; T_job_param, Eigen::Dynamic, 1 &gt;&gt; &amp;job_params, const std::vector&lt; std::vector&lt; double &gt;&gt; &amp;x_r, const std::vector&lt; std::vector&lt; int &gt;&gt; &amp;x_i)</td></tr>
<tr class="memdesc:a88f6e7e3dcbe2a7993dce89ce06e4d30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates a parallel MPI call on the root.  <a href="#a88f6e7e3dcbe2a7993dce89ce06e4d30">More...</a><br /></td></tr>
<tr class="separator:a88f6e7e3dcbe2a7993dce89ce06e4d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb656931b10dcb379014479dfe7ea2f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#adb656931b10dcb379014479dfe7ea2f4">mpi_parallel_call</a> ()</td></tr>
<tr class="separator:adb656931b10dcb379014479dfe7ea2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60b27412905d30607b0695916acb7644"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a24da65a3703bf6be8e4cf98383ba7c31">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a60b27412905d30607b0695916acb7644">reduce_combine</a> ()</td></tr>
<tr class="memdesc:a60b27412905d30607b0695916acb7644"><td class="mdescLeft">&#160;</td><td class="mdescRight">Once all data is distributed and cached the reduce_combine evaluates all assigned function evaluations locally, transfers all results back to the root and finally combines on the root all results.  <a href="#a60b27412905d30607b0695916acb7644">More...</a><br /></td></tr>
<tr class="separator:a60b27412905d30607b0695916acb7644"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a96db94f88d875ca947b83c2167de9c0a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a96db94f88d875ca947b83c2167de9c0a">distributed_apply</a> ()</td></tr>
<tr class="memdesc:a96db94f88d875ca947b83c2167de9c0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point on the workers for the <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html" title="The MPI parallel call class manages the distributed evaluation of a collection of tasks following the...">mpi_parallel_call</a>.  <a href="#a96db94f88d875ca947b83c2167de9c0a">More...</a><br /></td></tr>
<tr class="separator:a96db94f88d875ca947b83c2167de9c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a24da65a3703bf6be8e4cf98383ba7c31"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a24da65a3703bf6be8e4cf98383ba7c31">result_t</a> = typename CombineF::result_t</td></tr>
<tr class="separator:a24da65a3703bf6be8e4cf98383ba7c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad1363d1d3b62c8bec9faff26b36c69"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#adad1363d1d3b62c8bec9faff26b36c69">cache_x_r</a> = <a class="el" href="../../db/deb/classstan_1_1math_1_1internal_1_1mpi__parallel__call__cache.html">internal::mpi_parallel_call_cache</a>&lt; call_id, 1, std::vector&lt; std::vector&lt; double &gt;&gt;&gt;</td></tr>
<tr class="separator:adad1363d1d3b62c8bec9faff26b36c69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7292660246defb245d6fa3032f0b19cf"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a7292660246defb245d6fa3032f0b19cf">cache_x_i</a> = <a class="el" href="../../db/deb/classstan_1_1math_1_1internal_1_1mpi__parallel__call__cache.html">internal::mpi_parallel_call_cache</a>&lt; call_id, 2, std::vector&lt; std::vector&lt; int &gt;&gt;&gt;</td></tr>
<tr class="separator:a7292660246defb245d6fa3032f0b19cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab36e1db6a186cb4fb4444fa11c5c13e2"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#ab36e1db6a186cb4fb4444fa11c5c13e2">cache_f_out</a> = <a class="el" href="../../db/deb/classstan_1_1math_1_1internal_1_1mpi__parallel__call__cache.html">internal::mpi_parallel_call_cache</a>&lt; call_id, 3, std::vector&lt; int &gt;&gt;</td></tr>
<tr class="separator:ab36e1db6a186cb4fb4444fa11c5c13e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4b945add23a0232165d1e026093e4f"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a8b4b945add23a0232165d1e026093e4f">cache_chunks</a> = <a class="el" href="../../db/deb/classstan_1_1math_1_1internal_1_1mpi__parallel__call__cache.html">internal::mpi_parallel_call_cache</a>&lt; call_id, 4, std::vector&lt; int &gt;&gt;</td></tr>
<tr class="separator:a8b4b945add23a0232165d1e026093e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa653b8e5d379a16e39844111c05bb0fe"><td class="memTemplParams" colspan="2">template&lt;typename T_cache &gt; </td></tr>
<tr class="memitem:aa653b8e5d379a16e39844111c05bb0fe"><td class="memTemplItemLeft" align="right" valign="top">T_cache::cache_t &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#aa653b8e5d379a16e39844111c05bb0fe">scatter_array_2d_cached</a> (typename T_cache::cache_t &amp;data)</td></tr>
<tr class="memdesc:aa653b8e5d379a16e39844111c05bb0fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a cached scatter of a 2D array (nested std::vector).  <a href="#aa653b8e5d379a16e39844111c05bb0fe">More...</a><br /></td></tr>
<tr class="separator:aa653b8e5d379a16e39844111c05bb0fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdad45ba37a5d8f9eb12aa5d4bddae0b"><td class="memTemplParams" colspan="2">template&lt;typename T_cache &gt; </td></tr>
<tr class="memitem:abdad45ba37a5d8f9eb12aa5d4bddae0b"><td class="memTemplItemLeft" align="right" valign="top">T_cache::cache_t &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#abdad45ba37a5d8f9eb12aa5d4bddae0b">broadcast_array_1d_cached</a> (typename T_cache::cache_t &amp;data)</td></tr>
<tr class="memdesc:abdad45ba37a5d8f9eb12aa5d4bddae0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a cached broadcast of a 1D array (std::vector).  <a href="#abdad45ba37a5d8f9eb12aa5d4bddae0b">More...</a><br /></td></tr>
<tr class="separator:abdad45ba37a5d8f9eb12aa5d4bddae0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a277858a35fef004860f9355fa5bc982f"><td class="memTemplParams" colspan="2">template&lt;int meta_cache_id&gt; </td></tr>
<tr class="memitem:a277858a35fef004860f9355fa5bc982f"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#a4954408ac287ec405ca9b7bf59b3c19b">vector_d</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a277858a35fef004860f9355fa5bc982f">broadcast_vector</a> (const <a class="el" href="../../d4/d84/namespacestan_1_1math.html#a4954408ac287ec405ca9b7bf59b3c19b">vector_d</a> &amp;data)</td></tr>
<tr class="memdesc:a277858a35fef004860f9355fa5bc982f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcasts an <a class="el" href="../../d0/da5/namespace_eigen.html" title="(Expert) Numerical traits for algorithmic differentiation variables. ">Eigen</a> vector to the cluster.  <a href="#a277858a35fef004860f9355fa5bc982f">More...</a><br /></td></tr>
<tr class="separator:a277858a35fef004860f9355fa5bc982f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33bec241541f9eaee36fba1823b918ef"><td class="memTemplParams" colspan="2">template&lt;int meta_cache_id&gt; </td></tr>
<tr class="memitem:a33bec241541f9eaee36fba1823b918ef"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#aca2e8a0b7c1cca979b7ff43cbb75ca65">matrix_d</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a33bec241541f9eaee36fba1823b918ef">scatter_matrix</a> (const <a class="el" href="../../d4/d84/namespacestan_1_1math.html#aca2e8a0b7c1cca979b7ff43cbb75ca65">matrix_d</a> &amp;data)</td></tr>
<tr class="memdesc:a33bec241541f9eaee36fba1823b918ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scatters an <a class="el" href="../../d0/da5/namespace_eigen.html" title="(Expert) Numerical traits for algorithmic differentiation variables. ">Eigen</a> matrix column wise over the cluster.  <a href="#a33bec241541f9eaee36fba1823b918ef">More...</a><br /></td></tr>
<tr class="separator:a33bec241541f9eaee36fba1823b918ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a478ce94f64bb0148b0c008bffe578"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#ad8a478ce94f64bb0148b0c008bffe578">setup_call</a> (const <a class="el" href="../../d4/d84/namespacestan_1_1math.html#a4954408ac287ec405ca9b7bf59b3c19b">vector_d</a> &amp;shared_params, const <a class="el" href="../../d4/d84/namespacestan_1_1math.html#aca2e8a0b7c1cca979b7ff43cbb75ca65">matrix_d</a> &amp;job_params, const std::vector&lt; std::vector&lt; double &gt;&gt; &amp;x_r, const std::vector&lt; std::vector&lt; int &gt;&gt; &amp;x_i)</td></tr>
<tr class="separator:ad8a478ce94f64bb0148b0c008bffe578"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae8ae5e92b7802e5b7707e488dd135d68"><td class="memItemLeft" align="right" valign="top">boost::mpi::communicator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#ae8ae5e92b7802e5b7707e488dd135d68">world_</a></td></tr>
<tr class="separator:ae8ae5e92b7802e5b7707e488dd135d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae778574018c43deef34663ae38cf403d"><td class="memItemLeft" align="right" valign="top">const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#ae778574018c43deef34663ae38cf403d">rank_</a> = world_.rank()</td></tr>
<tr class="separator:ae778574018c43deef34663ae38cf403d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a283485439568ea115373b760dca0901c"><td class="memItemLeft" align="right" valign="top">const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a283485439568ea115373b760dca0901c">world_size_</a> = world_.size()</td></tr>
<tr class="separator:a283485439568ea115373b760dca0901c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea759d8a8d43282deedc335958b003cc"><td class="memItemLeft" align="right" valign="top">std::unique_lock&lt; std::mutex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#aea759d8a8d43282deedc335958b003cc">cluster_lock_</a></td></tr>
<tr class="separator:aea759d8a8d43282deedc335958b003cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa60548a434ab57d4b9be0ec673681911"><td class="memItemLeft" align="right" valign="top">CombineF&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#aa60548a434ab57d4b9be0ec673681911">combine_</a></td></tr>
<tr class="separator:aa60548a434ab57d4b9be0ec673681911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab679896ddaa530c26b7937e097729103"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#a4954408ac287ec405ca9b7bf59b3c19b">vector_d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#ab679896ddaa530c26b7937e097729103">local_shared_params_dbl_</a></td></tr>
<tr class="separator:ab679896ddaa530c26b7937e097729103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d12d2a83442fc506025c475f90a614"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#aca2e8a0b7c1cca979b7ff43cbb75ca65">matrix_d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a80d12d2a83442fc506025c475f90a614">local_job_params_dbl_</a></td></tr>
<tr class="separator:a80d12d2a83442fc506025c475f90a614"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a9389fad657a148e85da4d680257bfaa0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a9389fad657a148e85da4d680257bfaa0">num_outputs_per_job_</a> = -1</td></tr>
<tr class="separator:a9389fad657a148e85da4d680257bfaa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a8b4b945add23a0232165d1e026093e4f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::<a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a8b4b945add23a0232165d1e026093e4f">cache_chunks</a> =  <a class="el" href="../../db/deb/classstan_1_1math_1_1internal_1_1mpi__parallel__call__cache.html">internal::mpi_parallel_call_cache</a>&lt;call_id, 4, std::vector&lt;int&gt;&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00179">179</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab36e1db6a186cb4fb4444fa11c5c13e2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::<a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#ab36e1db6a186cb4fb4444fa11c5c13e2">cache_f_out</a> =  <a class="el" href="../../db/deb/classstan_1_1math_1_1internal_1_1mpi__parallel__call__cache.html">internal::mpi_parallel_call_cache</a>&lt;call_id, 3, std::vector&lt;int&gt;&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00177">177</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7292660246defb245d6fa3032f0b19cf"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::<a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a7292660246defb245d6fa3032f0b19cf">cache_x_i</a> =  <a class="el" href="../../db/deb/classstan_1_1math_1_1internal_1_1mpi__parallel__call__cache.html">internal::mpi_parallel_call_cache</a>&lt;call_id, 2, std::vector&lt;std::vector&lt;int&gt;&gt;&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00175">175</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="adad1363d1d3b62c8bec9faff26b36c69"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::<a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#adad1363d1d3b62c8bec9faff26b36c69">cache_x_r</a> =  <a class="el" href="../../db/deb/classstan_1_1math_1_1internal_1_1mpi__parallel__call__cache.html">internal::mpi_parallel_call_cache</a>&lt;call_id, 1, std::vector&lt;std::vector&lt;double&gt;&gt;&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00172">172</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a24da65a3703bf6be8e4cf98383ba7c31"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::<a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a24da65a3703bf6be8e4cf98383ba7c31">result_t</a> =  typename CombineF::result_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00167">167</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a88f6e7e3dcbe2a7993dce89ce06e4d30"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<div class="memtemplate">
template&lt;typename T_shared_param , typename T_job_param &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::<a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">mpi_parallel_call</a> </td>
          <td>(</td>
          <td class="paramtype">const T_shared_param &amp;&#160;</td>
          <td class="paramname"><em>shared_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Eigen::Matrix&lt; T_job_param, Eigen::Dynamic, 1 &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>job_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; double &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>x_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>x_i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initiates a parallel MPI call on the root. </p>
<p>The constructor allocates the MPI resource and initiates on all workers the MPI parallel call which mirror the communication and execute a chunk of the overall work.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T_shared_param</td><td>type of shared parameters </td></tr>
    <tr><td class="paramname">T_job_param</td><td>type of job-specific parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shared_params</td><td>shared parameter vector </td></tr>
    <tr><td class="paramname">job_params</td><td>array of job-specific parameter vectors </td></tr>
    <tr><td class="paramname">x_r</td><td>array of job-specific real arrays (data only argument) </td></tr>
    <tr><td class="paramname">x_i</td><td>array of job-specific int arrays (data only argument) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00204">204</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="adb656931b10dcb379014479dfe7ea2f4"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::<a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">mpi_parallel_call</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00245">245</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abdad45ba37a5d8f9eb12aa5d4bddae0b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<div class="memtemplate">
template&lt;typename T_cache &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T_cache::cache_t&amp; <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::broadcast_array_1d_cached </td>
          <td>(</td>
          <td class="paramtype">typename T_cache::cache_t &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a cached broadcast of a 1D array (std::vector). </p>
<p>On the first call the data on the root is broadcasted to all workers and is stored in the cache locally. This marks the cache as valid and any subsequent calls will immediately return the cached results. Thus, after calling this function it is guaranteed that on all workers a call to T_cache::data() will return the same vector within each process of the cluster.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T_cache</td><td>static data storage type for the 1D array </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>vector to be broadcasted from the root and a dummy argument on workers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>broadcasted vector originating from the root </dd></dl>

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00483">483</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a277858a35fef004860f9355fa5bc982f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<div class="memtemplate">
template&lt;int meta_cache_id&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#a4954408ac287ec405ca9b7bf59b3c19b">vector_d</a> <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::broadcast_vector </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d84/namespacestan_1_1math.html#a4954408ac287ec405ca9b7bf59b3c19b">vector_d</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Broadcasts an <a class="el" href="../../d0/da5/namespace_eigen.html" title="(Expert) Numerical traits for algorithmic differentiation variables. ">Eigen</a> vector to the cluster. </p>
<p>Meta information as the data shape is treated as static data and only transferred on the first call and read from cache subsequently. This static shape data is stored with the meta_cache_id label.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">meta_cache_id</td><td>item label for static shape data </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>vector to be broadcasted from the root and a dummy argument on workers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>broadcasted vector originating from the root </dd></dl>

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00513">513</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a96db94f88d875ca947b83c2167de9c0a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::distributed_apply </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Entry point on the workers for the <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html" title="The MPI parallel call class manages the distributed evaluation of a collection of tasks following the...">mpi_parallel_call</a>. </p>

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00256">256</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a60b27412905d30607b0695916acb7644"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html#a24da65a3703bf6be8e4cf98383ba7c31">result_t</a> <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::reduce_combine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Once all data is distributed and cached the reduce_combine evaluates all assigned function evaluations locally, transfers all results back to the root and finally combines on the root all results. </p>

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00269">269</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa653b8e5d379a16e39844111c05bb0fe"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<div class="memtemplate">
template&lt;typename T_cache &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T_cache::cache_t&amp; <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::scatter_array_2d_cached </td>
          <td>(</td>
          <td class="paramtype">typename T_cache::cache_t &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a cached scatter of a 2D array (nested std::vector). </p>
<p>On the first call the data on the root is scattered to all workers and is stored in the cache locally. Each worker only receives its respective chunk and marks the cache as valid such that any subsequent calls will immediately return the cached chunk. Thus, after calling this function it is guaranteed that on all workers a call to T_cache::data() will return the same chunk within each process of the cluster.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T_cache</td><td>static data storage type for the 2D array </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>2D array to be scattered from the root and a dummy argument on workers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>2D array chunk of the worker </dd></dl>

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00423">423</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a33bec241541f9eaee36fba1823b918ef"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<div class="memtemplate">
template&lt;int meta_cache_id&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#aca2e8a0b7c1cca979b7ff43cbb75ca65">matrix_d</a> <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::scatter_matrix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d84/namespacestan_1_1math.html#aca2e8a0b7c1cca979b7ff43cbb75ca65">matrix_d</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scatters an <a class="el" href="../../d0/da5/namespace_eigen.html" title="(Expert) Numerical traits for algorithmic differentiation variables. ">Eigen</a> matrix column wise over the cluster. </p>
<p>Meta information as the data shape is treated as static data and only transferred on the first call and read from cache subsequently. This static shape data is stored with the meta_cache_id label.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">meta_cache_id</td><td>item label for static shape data </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>matrix to be scattered column-wise and a dummy argument on workers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>matrix chunk for a given worker. </dd></dl>

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00541">541</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad8a478ce94f64bb0148b0c008bffe578"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::setup_call </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d84/namespacestan_1_1math.html#a4954408ac287ec405ca9b7bf59b3c19b">vector_d</a> &amp;&#160;</td>
          <td class="paramname"><em>shared_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d84/namespacestan_1_1math.html#aca2e8a0b7c1cca979b7ff43cbb75ca65">matrix_d</a> &amp;&#160;</td>
          <td class="paramname"><em>job_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; double &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>x_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; int &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>x_i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00565">565</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aea759d8a8d43282deedc335958b003cc"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_lock&lt;std::mutex&gt; <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::cluster_lock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00165">165</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa60548a434ab57d4b9be0ec673681911"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CombineF <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::combine_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00184">184</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a80d12d2a83442fc506025c475f90a614"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#aca2e8a0b7c1cca979b7ff43cbb75ca65">matrix_d</a> <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::local_job_params_dbl_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00187">187</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab679896ddaa530c26b7937e097729103"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d84/namespacestan_1_1math.html#a4954408ac287ec405ca9b7bf59b3c19b">vector_d</a> <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::local_shared_params_dbl_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00186">186</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9389fad657a148e85da4d680257bfaa0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::num_outputs_per_job_ = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00182">182</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae778574018c43deef34663ae38cf403d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::size_t <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::rank_ = world_.rank()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00163">163</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae8ae5e92b7802e5b7707e488dd135d68"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mpi::communicator <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::world_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00162">162</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a283485439568ea115373b760dca0901c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int call_id, typename ReduceF, typename CombineF&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::size_t <a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">stan::math::mpi_parallel_call</a>&lt; call_id, ReduceF, CombineF &gt;::world_size_ = world_.size()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html#l00164">164</a> of file <a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>stan/math/prim/functor/<a class="el" href="../../d3/daf/mpi__parallel__call_8hpp_source.html">mpi_parallel_call.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../da/dce/namespacestan.html">stan</a></li><li class="navelem"><a class="el" href="../../d4/d84/namespacestan_1_1math.html">math</a></li><li class="navelem"><a class="el" href="../../dc/d2e/classstan_1_1math_1_1mpi__parallel__call.html">mpi_parallel_call</a></li>
    <li class="footer">
    <div class="contents" style="font-size:100%;">
      <span style="float:left; margin=0 1em 0 1em;">
      &nbsp;&nbsp;&nbsp;&nbsp;
      [ <a href="http://mc-stan.org/">Stan Home Page</a> ]
      </span>
      <span style="float:right; margin=0 1em 0 1em;">
      <i>&copy; 2011&ndash;2019,
      Stan Development Team.
      &nbsp;&nbsp;&nbsp;&nbsp;
      </i>
      </span>
    </div> </li>
  </ul>
</div>
</body>
</html>
