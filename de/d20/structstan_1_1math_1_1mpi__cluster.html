<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stan Math Library: stan::math::mpi_cluster Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../$standoxy.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../stanlogo-main.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://mc-stan.org/math">Stan Math Library</a>
   &#160;<span id="projectnumber">4.0.1</span>
   </div>
   <div id="projectbrief">Automatic Differentiation</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d20/structstan_1_1math_1_1mpi__cluster.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../dd/d9d/structstan_1_1math_1_1mpi__cluster-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stan::math::mpi_cluster Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>MPI cluster holds MPI resources and must be initialized only once in any MPI program. </p>
<p>The RAII principle is used and MPI resource allocation and deallocation is done when constructing and destructing this object. This must occur only once in any program as the MPI layer will fail otherwise.</p>
<p>The available MPI resources are determined from environment variables which are usually set by the mpirun command which is recommended to launch any MPI program.</p>
<p>The mpirun program automatically starts the number of pre-specified processes. The boost mpi library is used to interface with MPI. In boost mpi terminology we refer to the overall MPI resources as world. Each process has an assigned rank which is a numeric index running from 0 to the number of processes-1 (also called the world size). We refer to the rank = 0 process as the root process and all others (rank &gt; 0) are workers. </p>

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00126">126</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a03acaf83b4e9592930497a00f7da225e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#a03acaf83b4e9592930497a00f7da225e">mpi_cluster</a> ()</td></tr>
<tr class="separator:a03acaf83b4e9592930497a00f7da225e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30af5100fb726d01d958d189ff3722a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#a30af5100fb726d01d958d189ff3722a0">~mpi_cluster</a> ()</td></tr>
<tr class="separator:a30af5100fb726d01d958d189ff3722a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab83f6b5525007546f4f06501073fc34a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#ab83f6b5525007546f4f06501073fc34a">listen</a> ()</td></tr>
<tr class="memdesc:ab83f6b5525007546f4f06501073fc34a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switches cluster into listening mode.  <a href="#ab83f6b5525007546f4f06501073fc34a">More...</a><br /></td></tr>
<tr class="separator:ab83f6b5525007546f4f06501073fc34a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a071519f0bcb1c2ff45fe44318836783b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#a071519f0bcb1c2ff45fe44318836783b">stop_listen</a> ()</td></tr>
<tr class="memdesc:a071519f0bcb1c2ff45fe44318836783b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops listening state of the cluster.  <a href="#a071519f0bcb1c2ff45fe44318836783b">More...</a><br /></td></tr>
<tr class="separator:a071519f0bcb1c2ff45fe44318836783b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a798b615320f5c824f91fef64cf40fc68"><td class="memItemLeft" align="right" valign="top">static bool &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#a798b615320f5c824f91fef64cf40fc68">listening_status</a> ()</td></tr>
<tr class="memdesc:a798b615320f5c824f91fef64cf40fc68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current listening state of the cluster.  <a href="#a798b615320f5c824f91fef64cf40fc68">More...</a><br /></td></tr>
<tr class="separator:a798b615320f5c824f91fef64cf40fc68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9046f8ac160c826d712b023d231fe19f"><td class="memItemLeft" align="right" valign="top">static std::mutex &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#a9046f8ac160c826d712b023d231fe19f">in_use</a> ()</td></tr>
<tr class="memdesc:a9046f8ac160c826d712b023d231fe19f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a reference to the global in use mutex.  <a href="#a9046f8ac160c826d712b023d231fe19f">More...</a><br /></td></tr>
<tr class="separator:a9046f8ac160c826d712b023d231fe19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8d1e928b7a854b088c88f3719d30ea05"><td class="memItemLeft" align="right" valign="top">boost::mpi::environment&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#a8d1e928b7a854b088c88f3719d30ea05">env</a></td></tr>
<tr class="separator:a8d1e928b7a854b088c88f3719d30ea05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4deecd882624f0c99f86e5cc27676a06"><td class="memItemLeft" align="right" valign="top">boost::mpi::communicator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#a4deecd882624f0c99f86e5cc27676a06">world_</a></td></tr>
<tr class="separator:a4deecd882624f0c99f86e5cc27676a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d4e2524602514d0c1cae3eba0623c6d"><td class="memItemLeft" align="right" valign="top">std::size_t const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html#a7d4e2524602514d0c1cae3eba0623c6d">rank_</a> = world_.rank()</td></tr>
<tr class="separator:a7d4e2524602514d0c1cae3eba0623c6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a03acaf83b4e9592930497a00f7da225e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">stan::math::mpi_cluster::mpi_cluster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00131">131</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a30af5100fb726d01d958d189ff3722a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">stan::math::mpi_cluster::~mpi_cluster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00133">133</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9046f8ac160c826d712b023d231fe19f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::mutex&amp; stan::math::mpi_cluster::in_use </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a reference to the global in use mutex. </p>

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00194">194</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab83f6b5525007546f4f06501073fc34a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stan::math::mpi_cluster::listen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switches cluster into listening mode. </p>
<p>That is, for the root process we only flag that the workers are now listening and as such can receive commands while for the non-root processes we enter into a listening state. In the listening state on the non-root processes we wait for broadcasts of <a class="el" href="../../d5/d25/structstan_1_1math_1_1mpi__command.html" title="A MPI command object is used to execute code on worker nodes. ">mpi_command</a> objects which are initiated on the root using the mpi_broadcast_command function below. Each received <a class="el" href="../../d5/d25/structstan_1_1math_1_1mpi__command.html" title="A MPI command object is used to execute code on worker nodes. ">mpi_command</a> is executed using the virtual run method. </p>

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00149">149</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a798b615320f5c824f91fef64cf40fc68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool&amp; stan::math::mpi_cluster::listening_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current listening state of the cluster. </p>

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00186">186</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a071519f0bcb1c2ff45fe44318836783b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stan::math::mpi_cluster::stop_listen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops listening state of the cluster. </p>
<p>This happens automatically upon destruction. It is achieved by sending the <a class="el" href="../../d6/d94/structstan_1_1math_1_1mpi__stop__worker.html" title="MPI command used to stop childs nodes from listening for further commands. ">mpi_stop_worker</a> command. </p>

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00176">176</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a8d1e928b7a854b088c88f3719d30ea05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::mpi::environment stan::math::mpi_cluster::env</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00127">127</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7d4e2524602514d0c1cae3eba0623c6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t const stan::math::mpi_cluster::rank_ = world_.rank()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00129">129</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4deecd882624f0c99f86e5cc27676a06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::mpi::communicator stan::math::mpi_cluster::world_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html#l00128">128</a> of file <a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>stan/math/prim/functor/<a class="el" href="../../d2/d59/mpi__cluster_8hpp_source.html">mpi_cluster.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../da/dce/namespacestan.html">stan</a></li><li class="navelem"><a class="el" href="../../d4/d84/namespacestan_1_1math.html">math</a></li><li class="navelem"><a class="el" href="../../de/d20/structstan_1_1math_1_1mpi__cluster.html">mpi_cluster</a></li>
    <li class="footer">
    <div class="contents" style="font-size:100%;">
      <span style="float:left; margin=0 1em 0 1em;">
      &nbsp;&nbsp;&nbsp;&nbsp;
      [ <a href="http://mc-stan.org/">Stan Home Page</a> ]
      </span>
      <span style="float:right; margin=0 1em 0 1em;">
      <i>&copy; 2011&ndash;2019,
      Stan Development Team.
      &nbsp;&nbsp;&nbsp;&nbsp;
      </i>
      </span>
    </div> </li>
  </ul>
</div>
</body>
</html>
